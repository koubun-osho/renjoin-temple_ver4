# 蓮城院公式サイト タスク指示書【MVP版】

## プロジェクト管理

### MVP開発方針
**セキュリティを最優先に、最小限の機能で価値を最速で実現する**

### タスク分類
- 🔴 **Critical**: セキュリティ・必須機能
- 🟡 **High**: MVP機能
- 🟢 **Medium**: 改善・最適化
- 🔵 **Low**: Phase 2以降

### 見積もり単位
- **XS**: 1-2時間
- **S**: 2-4時間  
- **M**: 4-8時間（1日）
- **L**: 8-16時間（2日）

---

## Phase 0: 基盤構築とセキュリティ設定【最優先】（Week 1）
**目的**: 開発の土台を固め、機密情報を安全に管理する体制を確立する

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P0-01 | アカウント作成 | Sanity, Vercel, GitHub | 🔴 | XS | - | sanity-cms-architect |
| P0-02 | Next.jsプロジェクト初期化 | TypeScript, App Router設定 | 🔴 | S | P0-01 | renjoin-frontend-developer |
| P0-03 | Gitリポジトリ作成 | GitHub連携、初期コミット | 🔴 | XS | P0-02 | renjoin-frontend-developer |
| P0-04 | .gitignore設定 | 機密情報ファイル除外設定 | 🔴 | XS | P0-03 | security-auditor |
| P0-05 | Sanityプロジェクト作成 | CMS基盤、APIキー取得 | 🔴 | S | P0-01 | sanity-cms-architect |
| P0-06 | 環境変数設定（ローカル） | .env.local作成・設定 | 🔴 | XS | P0-05 | security-auditor |
| P0-07 | Vercel連携 | GitHub連携、自動デプロイ設定 | 🔴 | S | P0-03 | renjoin-frontend-developer |
| P0-08 | 環境変数設定（Vercel） | 本番環境変数設定 | 🔴 | XS | P0-07 | security-auditor |

## Phase 1: コンテンツ管理基盤（CMS）の構築（Week 2）
**目的**: ウェブサイトの「魂」となるコンテンツを入れるための器を完成させる

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P1-01 | Sanityスキーマ定義 | ブログ、お知らせ、固定ページ | 🔴 | M | P0-05 | sanity-cms-architect |
| P1-02 | Sanity Studio設定 | 管理画面のカスタマイズ | 🔴 | S | P1-01 | sanity-cms-architect |
| P1-03 | テストコンテンツ登録 | サンプル記事、お知らせ作成 | 🔴 | S | P1-02 | sanity-cms-architect |
| P1-04 | Sanityクライアント設定 | Next.jsでデータ取得 | 🔴 | S | P1-01 | sanity-cms-architect |
| P1-05 | スキーマ検証 | CMS動作確認、データ取得テスト | 🔴 | S | P1-03 | sanity-cms-architect |

## Phase 2: コア機能（ブログ）の実装（Week 3）
**目的**: サイトの中心機能であるブログをCMSと連携させて表示

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P2-01 | Tailwind CSS設定 | カラー、フォント、スタイル設定 | 🔴 | S | P0-02 | renjoin-frontend-developer |
| P2-02 | ヘッダーコンポーネント | ナビゲーション、ロゴ配置 | 🔴 | M | P2-01 | renjoin-frontend-developer |
| P2-03 | フッターコンポーネント | サイトマップ、連絡先情報 | 🔴 | S | P2-01 | renjoin-frontend-developer |
| P2-04 | 個別記事ページ | XSS対策含むサニタイズ実装 | 🔴 | M | P1-04 | renjoin-frontend-developer |
| P2-05 | ブログ一覧ページ | 時系列表示、ページネーション | 🔴 | M | P1-04 | renjoin-frontend-developer |
| P2-06 | カードコンポーネント | 記事カードUI | 🔴 | S | P2-01 | renjoin-frontend-developer |
| P2-07 | DOMPurify実装 | XSS対策ライブラリ導入 | 🔴 | S | P2-04 | security-auditor |

## Phase 3: 静的ページとトップページの構築（Week 4）
**目的**: ブログ以外の寺院公式サイトとしての体裁を整える

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P3-01 | 固定ページ実装 | 由緒、利用規約など | 🔴 | M | P1-04 | renjoin-frontend-developer |
| P3-02 | お知らせ一覧ページ | CMSからデータ取得表示 | 🔴 | M | P1-04 | renjoin-frontend-developer |
| P3-03 | トップページ実装 | ヒーロー、縦書きキャッチ | 🔴 | L | P2-02, P2-03 | renjoin-frontend-developer |
| P3-04 | お知らせセクション | 最新3件表示 | 🔴 | S | P3-02 | renjoin-frontend-developer |
| P3-05 | ブログセクション | 最新記事3件表示 | 🔴 | S | P2-05 | renjoin-frontend-developer |
| P3-06 | アクセスセクション | 地図、交通手段 | 🔴 | S | P3-01 | renjoin-frontend-developer |
| P3-07 | レスポンシブ対応 | モバイルファースト | 🔴 | M | All | renjoin-frontend-developer |

## Phase 4: 最終調整と公開（Week 5）
**目的**: 公開に向けて、SEOや分析ツールなどの仕上げを行う

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P4-01 | SEOコンポーネント | メタタグ、OGP設定 | 🔴 | M | All pages | seo-technical-consultant |
| P4-02 | サイトマップ生成 | sitemap.xml自動生成 | 🔴 | S | All pages | seo-technical-consultant |
| P4-03 | Google Analytics導入 | GA4設定、プライバシー対応 | 🔴 | S | P4-01 | renjoin-frontend-developer |
| P4-04 | パフォーマンス最適化 | 画像最適化、SSG設定 | 🔴 | M | All | renjoin-frontend-developer |
| P4-05 | セキュリティ最終確認 | 脆弱性チェック、環境変数確認 | 🔴 | S | All | security-auditor |
| P4-06 | 最終動作確認 | 全機能テスト、エラーハンドリング | 🔴 | M | All | 全エージェント |
| P4-07 | 独自ドメイン設定 | DNS設定、SSL証明書 | 🔴 | S | P4-06 | renjoin-frontend-developer |
| P4-08 | 本番リリース | 最終公開、監視開始 | 🔴 | S | P4-07 | 全エージェント |

---

## Phase 5: 基本機能強化（目標サイト対応）（Week 6-8）
**目的**: 目標サイト（TCD113 ZEN）の品質に近づける基本機能を実装

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P5-01 | 多言語対応システム構築 | next-intl導入、日英切り替え | 🔴 | L | P4-08 | renjoin-frontend-developer |
| P5-02 | Sanityスキーマ多言語化 | CMSコンテンツの多言語対応 | 🔴 | M | P5-01 | sanity-cms-architect |
| P5-03 | プリローダー実装 | ロゴアニメーション付きローディング | 🔴 | M | P4-08 | renjoin-frontend-developer |
| P5-04 | ヒーローセクション改善 | 縦書き表示、詩的テキスト | 🔴 | M | P4-08 | renjoin-frontend-developer |
| P5-05 | スクロールアニメーション | Intersection Observer実装 | 🟡 | M | P5-04 | renjoin-frontend-developer |

## Phase 6: コンテンツ拡充（目標サイト対応）（Week 9-12）
**目的**: 寺院サイトとしての充実したコンテンツとナビゲーションを整備

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P6-01 | 拡張ナビゲーション実装 | 御祈祷、精進料理等のメニュー追加 | 🔴 | M | P5-01 | renjoin-frontend-developer |
| P6-02 | 特別体験ページ作成 | 坐禅体験、精進料理LP | 🔴 | L | P6-01 | renjoin-frontend-developer |
| P6-03 | ギャラリー機能実装 | Swiper.js、ライトボックス | 🟡 | M | P5-01 | renjoin-frontend-developer |
| P6-04 | サイドボタン実装 | フローティングボタン、スクロール連動 | 🟡 | S | P5-05 | renjoin-frontend-developer |
| P6-05 | フッター情報拡充 | SNSリンク、サイトマップ表示 | 🟢 | S | P6-01 | renjoin-frontend-developer |

## Phase 7: UX/UI洗練（目標サイト対応）（Week 13-15）
**目的**: プロフェッショナルな寺院サイトとしての完成度を高める

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P7-01 | マイクロインタラクション | ホバーエフェクト、トランジション | 🟢 | M | P6-01 | renjoin-frontend-developer |
| P7-02 | ページ遷移エフェクト | スムーズな画面切り替え | 🟢 | S | P7-01 | renjoin-frontend-developer |
| P7-03 | アクセシビリティ強化 | WCAG準拠、読み上げ対応 | 🟡 | M | P6-01 | renjoin-frontend-developer |
| P7-04 | フォント最適化 | 明朝体、ゴシック体の使い分け | 🟢 | S | P7-01 | renjoin-frontend-developer |

## Phase 8: 技術的最適化（目標サイト対応）（Week 16-17）
**目的**: 最新Web技術による高度な機能実装

| ID | タスク名 | 説明 | 優先度 | 見積 | 依存関係 | 担当 |
|---|---|---|---|---|---|---|
| P8-01 | PWA実装 | Service Worker、オフライン対応 | 🔵 | L | P7-01 | renjoin-frontend-developer |
| P8-02 | 高度な構造化データ | FAQ、イベント、寺院スキーマ | 🟡 | M | P6-02 | seo-technical-consultant |
| P8-03 | パンくずリスト実装 | 階層ナビゲーション表示 | 🟡 | S | P6-01 | renjoin-frontend-developer |
| P8-04 | 最終パフォーマンス調整 | Core Web Vitals最適化 | 🟡 | M | All | renjoin-frontend-developer |

## Phase 2以降で実装予定の機能（将来拡張）

### フォーム機能
- お問い合わせフォーム
- イベント申込フォーム
- バリデーション・CSRF対策

### ブログ拡張機能
- 検索機能
- カテゴリー・タグ機能
- 関連記事表示
- コメント機能

### 運用・管理機能
- アクセス解析ダッシュボード
- 予約管理システム
- メール配信システム
- 会員管理機能

---

## リスク管理

### 技術リスク
| リスク | 対策 |
|---|---|
| Sanity障害 | データバックアップ、静的ファイル化 |
| セキュリティ脆弱性 | 定期的な依存関係更新、脆弱性スキャン |
| パフォーマンス低下 | 継続的な監視、最適化 |

### プロジェクトリスク
| リスク | 対策 |
|---|---|
| スコープクリープ | MVP原則の徹底 |
| 納期遅延 | 優先度の厳格な管理 |
| コンテンツ準備遅延 | 早期のテストデータ準備 |

---

## 成功指標

### セキュリティ
- [ ] 環境変数が適切に設定されている
- [ ] XSS対策が実装されている
- [ ] HTTPS化が完了している
- [ ] 脆弱性スキャンで重大な問題なし

### 機能
- [ ] ブログ記事の投稿・表示が正常動作
- [ ] お知らせの投稿・表示が正常動作
- [ ] レスポンシブデザインが適切に動作
- [ ] SEO設定が適切に機能

### パフォーマンス
- [ ] PageSpeed Insights 90点以上
- [ ] モバイルフレンドリーテスト合格
- [ ] Core Web Vitals良好

### 運用
- [ ] Sanity Studio経由でのコンテンツ更新が可能
- [ ] Google Analytics でアクセス解析開始
- [ ] エラー監視が機能している

---

## チェックリスト

### Phase 0完了チェック
- [ ] GitHubリポジトリ作成完了
- [ ] .gitignore設定で機密情報除外
- [ ] Sanityプロジェクト作成完了
- [ ] 環境変数設定（ローカル・Vercel）
- [ ] Vercel自動デプロイ設定完了

### Phase 1完了チェック
- [ ] Sanityスキーマ定義完了
- [ ] Sanity Studio動作確認
- [ ] テストコンテンツ登録完了
- [ ] Next.js→Sanity接続確認

### Phase 2完了チェック
- [ ] ヘッダー・フッター実装完了
- [ ] ブログ一覧ページ表示確認
- [ ] 個別記事ページ表示確認
- [ ] XSS対策実装確認

### Phase 3完了チェック
- [ ] 全固定ページ実装完了
- [ ] トップページ表示確認
- [ ] 縦書きデザイン実装確認
- [ ] レスポンシブ対応確認

### Phase 4完了チェック
- [ ] SEO設定実装確認
- [ ] Google Analytics動作確認
- [ ] パフォーマンス最適化完了
- [ ] セキュリティチェック完了
- [ ] 本番公開完了

---

## 連絡先・リソース

### 開発リソース
- **リポジトリ**: [GitHub URL]
- **CMS管理**: [Sanity Studio URL]
- **本番サイト**: [Vercel URL]

### 外部サービス
- **Sanity**: [プロジェクトURL]
- **Vercel**: [プロジェクトURL]
- **Google Analytics**: [プロパティID]

---

## 担当エージェント説明

### sanity-cms-architect
- Sanity CMS関連のすべてのタスク（スキーマ定義、Studio設定、データ管理）
- CMSとNext.jsの連携設定

### renjoin-frontend-developer  
- フロントエンド開発全般（コンポーネント、ページ、スタイリング）
- Next.js、TypeScript、Tailwind CSSの実装
- レスポンシブデザインとUIの実装

### security-auditor
- セキュリティ設定と脆弱性対策
- 環境変数の安全な管理
- XSS対策など、セキュリティライブラリの導入

### seo-technical-consultant
- SEO最適化とメタタグ設定
- サイトマップ生成
- OGP設定と検索エンジン最適化

### 全エージェント
- 最終テストとリリース作業は全エージェントが協力して実施

---

## 更新履歴
| 日付 | バージョン | 更新内容 | 更新者 |
|---|---|---|---|
| 2025-01-16 | 2.1.0 | 担当エージェント割り振り追加 | Claude Code |
| 2025-01-12 | 2.0.0 | MVP版に全面改訂 | Dev |
| 2025-01-12 | 1.0.0 | 初版作成 | Dev |